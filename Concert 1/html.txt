<!DOCTYPE html>
<html>
<head>
  <title>Event Ticket Purchase</title>
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
  <h2>Buy Your Ticket</h2>
  <p>Select your preferred payment method:</p>

  <!-- Local Payment (M-Pesa Example via Safaricom Daraja API) -->
  <button onclick="payWithMpesa()">Pay with M-Pesa</button>

  <!-- PayPal -->
  <div id="paypal-button-container"></div>

  <!-- Stripe (for Cards, Google Pay, Apple Pay) -->
  <button id="checkout-button">Pay with Card / Google Pay / Apple Pay</button>

  <script>
    // M-Pesa (example placeholder)
    function payWithMpesa() {
      alert("Redirecting to M-Pesa checkout...");
      // Here you would call your backend API that connects to M-Pesa Daraja API
    }

    // PayPal Integration
    (function() {
      const script = document.createElement("script");
      script.src = "https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&currency=USD";
      script.onload = () => {
        paypal.Buttons({
          createOrder: function(data, actions) {
            return actions.order.create({
              purchase_units: [{ amount: { value: '10.00' } }]
            });
          },
          onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
              alert('Transaction completed by ' + details.payer.name.given_name);
            });
          }
        }).render('#paypal-button-container');
      };
      document.body.appendChild(script);
    })();

    // Stripe Checkout Example
    const stripe = Stripe("YOUR_PUBLISHABLE_KEY"); // Replace with your key
    document.getElementById("checkout-button").addEventListener("click", () => {
      stripe.redirectToCheckout({
        lineItems: [{ price: "YOUR_PRICE_ID", quantity: 1 }],
        mode: "payment",
        successUrl: window.location.href + "?success=true",
        cancelUrl: window.location.href + "?canceled=true",
      });
    });
  </script>
</body>
</html>